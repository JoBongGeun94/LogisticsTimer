# 물류 작업 인시수 측정 및 Gage R&R 기반 타이머 앱

## 1. 프로젝트 개요
- **앱명**: 스마트 인시수 타이머 (가칭)
- **목적**: 작업자별 작업 단위 측정 → 타이머 기반 시간 기록 → Gage R&R 분석 → 데이터 엑셀 출력 → 관리자에게 전송
- **적용 대상**: 물류 현장 작업자 및 관리자 (사용자 약 100–200명)
- **운영 플랫폼**: Android + iOS (Cross-platform)
- **배포 방식**: 내부 회사용 배포 (스토어 비공개)
- **보안 수준**: 사용자 로그인 필요, 최소 인증 수준 JWT + 비밀번호 / OTP
- **서버 구조**: 로컬 측정 후 Excel로 파일 저장, 관리자가 파일 수집 및 통합

---

## 2. 사용자 유형 및 역할 정의
| 사용자 유형 | 역할 | 기능 권한 |
|-------------|------|------------|
| 일반 작업자 | 측정 데이터 입력 | 타이머 시작/중지/랩, 측정항목 선택, 결과 저장 및 전송 |
| 관리자 | 데이터 통합/검토 | 측정결과 수신, 통합 분석, Gage R&R 리포트 확인, 엑셀 통합 |
| 어드민 (선택) | 계정 및 항목 설정 | 작업 항목 관리, 사용자 관리, 설정값 백엔드 조정 |

---

## 3. 기능 명세 (MECE 구조 기준)

### A. **타이머 측정 모듈**
- Lap, Start, Stop 기능
- 자동 시간 저장 기능 (소수점 2자리 초단위)
- 1명 사용자에 대해 다수 시도(Lap 기록) 저장 가능
- 배터리 절전·잠금 모드에도 타이머 지속 작동

### B. **측정 항목 입력 모듈**
- 측정 필드 선택:
  - 작업자 ID (선택 목록)
  - 작업 유형 (ex. 파렛트 적재, 분배 등)
  - 부품 번호 or 샘플 번호
  - 반복 시도 번호 (자동 증가)
- 입력 유효성 검사 및 필수 입력 체크

### C. **Gage R&R 분석 모듈**
- 저장된 데이터 기반 자동 분석 기능 (앱 내 시각화 + 해석)
- 분석 방법: ANOVA 기반 Gage R&R
- 산출값:
  - % Repeatability
  - % Reproducibility
  - % GRR
  - % Contribution by Part/Operator/Trial
- AIAG MSA 기준 자동 판단 (Pass/Fail 태그)
- 판정 결과 요약 보고서 생성 가능

### D. **엑셀 파일 생성 모듈**
- 측정값 + 분석 결과가 포함된 .xlsx 생성
- 시트 구성:
  - Raw Data 시트 (측정값 테이블)
  - Summary 시트 (Gage R&R 요약)
- 저장 위치: 사용자 디바이스 내부 다운로드 폴더

### E. **데이터 전송 모듈**
- 엑셀 파일 1건 단위 관리자 메일로 첨부 발송
- 또는 앱 내 수신처 URI 등록 기능을 통한 API 전송 지원
- 전송 완료 여부 사용자 피드백 제공 (Toast + 팝업)

### F. **계정/보안 관리 모듈**
- JWT 기반 로그인
- 사용자 그룹 권한 관리 (작업자 / 관리자)
- DB 저장 없음, 계정 정보는 기기 로컬 저장 (또는 Firebase 인증 등 가볍게 가능)

### G. **관리자 전용 기능 (옵션)**
- 수신 파일 일괄 통합 업로드
- Gage R&R 트렌드 리포트 시각화
- 사용자별 측정이력 조회 가능

---

## 4. UI/UX 설계 원칙
- 타이머 / 측정 / 결과 확인 전 과정을 1 스크린 내 최대한 집약
- 현장 사용 전제: 큰 버튼 / 낮은 화면 전환 / 어두운 테마 지원
- 작업자 혼선 방지를 위한 한글 ToolTip, 진동 피드백 추가
- 세션 유지 및 자동 저장 기능 필수 (측정 중 앱 종료 방지)

---

## 5. 기술 스택 제안
| 계층 | 제안 스택 | 비고 |
|------|-----------|------|
| 프론트 | Flutter / React Native | 크로스플랫폼 개발 용이 |
| 백엔드 (선택) | Firebase Auth / Node.js (API서버) | 로그인 + 전송 연동용 |
| Gage R&R 분석 | Dart(Package), JS 통계 패키지 또는 앱 내부 작성 | 서버 없이 내장처리 |
| 엑셀 처리 | xlsx.js / Native Plugin | Raw + Summary 시트 출력용 |

---

## 6. SOLID 원칙 기반 아키텍처 가이드
- **S (단일 책임)**: 타이머 / 분석 / 출력 / 계정은 각각 분리된 모듈로 구현
- **O (개방폐쇄)**: 새로운 측정항목/시나리오 추가 가능하도록 설정값 외부화
- **L (리스코프 치환)**: 관리자 ↔ 작업자 기능 명확 분리하되 공통 모듈은 재사용 가능하게
- **I (인터페이스 분리)**: Gage 분석 / 엑셀 출력 분리 인터페이스 설계
- **D (의존 역전)**: 데이터 전송/저장 기능은 추상화된 service interface로 구현

---

## 7. 테스트 및 검증 계획
- 측정 정확도 오차 테스트 (Timer API vs 실제 스톱워치)
- Gage R&R 통계 모듈 테스트 (시나리오별 입력 대비 결과값 교차 검증)
- 엑셀 내보내기 파일 구조 검증 (열, 시트, 수식 포함 여부)
- 파일 전송 실패/재시도 시나리오 처리 검증

---

## 8. 프로젝트 일정 (예시)
| 주차 | 내용 |
|------|------|
| 1주 | 기획 확정, 화면 설계안 시안 제작 |
| 2주 | 타이머 + 입력 기능 개발 완료 |
| 3주 | Gage 분석 로직 구현, UI 통합 |
| 4주 | 엑셀 내보내기, 파일 전송 기능 구현 |
| 5주 | 테스트 시나리오 실행, 버그 수정 |
| 6주 | 사내 배포 및 교육, 피드백 수렴 |

---

## 9. 향후 확장 고려 사항
- ERP 연동 시 API 인증·트리거 구현
- Gage 외 Bias, Linearity, Stability 등 품질분석 확장
- 관리자 포털(Web) + 자동 통합 시각화 대시보드

---

## 10. 참고 표준 및 권고사항
- **Gage R&R 기준**: AIAG MSA 4th Edition
- **작업 시간 측정 기준**: ISO 6385, ILO Time Study Guide
- **모듈 ID·직무 연계 표준**: NCS(국가직무능력표준) 활용 가능
- **개인정보 처리**: GDPR/ISMS 수준의 기본 보호(단말 내 저장/전송시 암호화)

---

## [첨부 예정 자료 목록]
- [ ] 직무 모듈 목록 엑셀 (NF2 정규화 구조)
- [ ] 직무명세서 엑셀 템플릿 (.xlsx)
- [ ] Gage R&R 분석 샘플 파일 (raw + summary)
- [ ] 앱 화면 설계안 초안 (Wireframe)
